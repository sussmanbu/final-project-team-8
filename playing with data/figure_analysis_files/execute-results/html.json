{
  "hash": "03c65fc656310a063d0d7df9e9f281e0",
  "result": {
    "markdown": "### starting to consider what figures to create\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nEmp_wb = read_csv('dataset/World_Bank_Employment_Data.csv', show_col_types = F)\nEduc_wb = read_csv('dataset/World_Bank_Educ_Data.csv', show_col_types = F)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nEmp_wb$Year <- as.Date(as.character(Emp_wb$Year), format = \"%Y\") \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(tidycensus))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tidycensus' was built under R version 4.3.3\n```\n:::\n\n```{.r .cell-code}\nsuppressPackageStartupMessages(library(sf))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'sf' was built under R version 4.3.3\n```\n:::\n\n```{.r .cell-code}\nv2020 <- load_variables(2020, \"acs5\", cache = TRUE)\n\nconcepts <- v2020 |>\n  filter(str_detect(concept, '^MEDIAN INCOME'))\n\n### Would like to analyze B19326_004 and B19326_005 (They were a dud, most likely skewed due to part-time workers)\n\n### Looking at C24040_002 and C24040_029 now which are\n##SEX BY INDUSTRY FOR THE FULL-TIME, YEAR-ROUND CIVILIAN EMPLOYED POPULATION 16 YEARS AND OVER for male and female\n\n\nvars_df <- v2020 |>\n  filter(name == 'C24040_002' | name == 'C24040_029') |>\n  mutate(\n    variable = name,\n    gender = if_else(\n      str_detect(label, 'Male'),\n      'Male',\n      'Female'\n    ),\n    .keep = 'none'\n  )\n\ngendered_employment <- get_acs(\n  geography = 'state',\n  variables = vars_df |> pull(variable),\n  year = 2020,\n  geometry = TRUE\n) |> \n  left_join(vars_df) |>\n  select(-moe, -variable, -GEOID, -NAME) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nGetting data from the 2016-2020 5-year ACS\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: • You have not set a Census API key. Users without a key are limited to 500\nqueries per day and may experience performance limitations.\nℹ For best results, get a Census API key at\nhttp://api.census.gov/data/key_signup.html and then supply the key to the\n`census_api_key()` function to use it throughout your tidycensus session.\nThis warning is displayed once per session.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nDownloading feature geometry from the Census website.  To cache shapefiles for use in future sessions, set `options(tigris_use_cache = TRUE)`.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |=                                                                     |   1%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |===                                                                   |   4%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |====                                                                  |   5%\n  |                                                                            \n  |====                                                                  |   6%\n  |                                                                            \n  |=====                                                                 |   7%\n  |                                                                            \n  |=====                                                                 |   8%\n  |                                                                            \n  |======                                                                |   8%\n  |                                                                            \n  |======                                                                |   9%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  11%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |==========                                                            |  14%\n  |                                                                            \n  |============                                                          |  18%\n  |                                                                            \n  |==============                                                        |  20%\n  |                                                                            \n  |================                                                      |  23%\n  |                                                                            \n  |=================                                                     |  24%\n  |                                                                            \n  |==================                                                    |  25%\n  |                                                                            \n  |===================                                                   |  27%\n  |                                                                            \n  |====================                                                  |  28%\n  |                                                                            \n  |=====================                                                 |  30%\n  |                                                                            \n  |========================                                              |  34%\n  |                                                                            \n  |===========================                                           |  39%\n  |                                                                            \n  |==============================                                        |  43%\n  |                                                                            \n  |================================                                      |  45%\n  |                                                                            \n  |==================================                                    |  49%\n  |                                                                            \n  |=========================================                             |  59%\n  |                                                                            \n  |====================================================                  |  74%\n  |                                                                            \n  |======================================================                |  78%\n  |                                                                            \n  |=======================================================               |  78%\n  |                                                                            \n  |=========================================================             |  81%\n  |                                                                            \n  |==================================================================    |  94%\n  |                                                                            \n  |======================================================================| 100%\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nJoining with `by = join_by(variable)`\n```\n:::\n\n```{.r .cell-code}\ngendered_employment_split <- gendered_employment |>\n  pivot_wider(names_from = 'gender', values_from = 'estimate')\n  \n\ntotal_employment <- gendered_employment |>\n  group_by(geometry) |>\n  summarise(total = sum(estimate))\n\ngendered_employment_final <- st_join(gendered_employment, total_employment, join = st_equals)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngendered_employment_split |>\n  ggplot(aes(fill =  `Male`/`Female`)) + \n  geom_sf() +\n  coord_sf(crs = 5070) +\n  scale_fill_viridis_c(option = 'plasma')+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](figure_analysis_files/figure-html/heatmap idea for median working population-1.png){width=672}\n:::\n\n```{.r .cell-code}\n### this creates two maps, which are representative of the proportion of full time, year round civillians in each state faceted by gender. I'm not sure if this is the best approach to data presentation, and I am open to other ideas\n```\n:::\n",
    "supporting": [
      "figure_analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}